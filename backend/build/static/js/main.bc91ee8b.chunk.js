(this.webpackJsonpopenstack=this.webpackJsonpopenstack||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},36:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(13),u=t.n(c),o=t(2),l=t(3),m=t.n(l),i="/api/persons",s=function(){return m.a.get(i).then((function(e){return e.data}))},f=function(e){return m.a.post(i,e).then((function(e){return e.data}))},d=function(e,n){return m.a.put("".concat(i,"/").concat(e),n).then((function(e){return e.data}))},b=function(e){return m.a.delete("".concat(i,"/").concat(e))},E=function(e){var n=e.persons,t=e.setPersons,a=e.newName,c=e.setNewName,u=e.newNumber,l=e.setNewNumber;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Add Person"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var r,m={name:a,number:u},i=(r=a,n.filter((function(e){if(e.name===r)return e}))),s=Object(o.a)(i,1)[0];(s=s||"").number===u?alert("".concat(a," already added")):s.name===a&&s.number!==u?window.confirm("".concat(a," already exists. Replace the old number?"))&&function(e,a){d(e,a).then((function(a){t(n.map((function(n){return n.id!==e?n:a})))})),c(""),l("")}(s.id,m):function(e){f(e).then((function(e){t(n.concat(e))})),c(""),l("")}(m)}},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:a,onChange:function(e){c(e.target.value)}})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:u,onChange:function(e){l(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add"))))},p=function(e){var n=e.message;return null===n?null:r.a.createElement("div",{className:"error"},n)},h=function(e){return r.a.createElement("p",null,r.a.createElement("b",null,e.name),": ",e.number)},v=function(e){var n=Object(a.useState)(null),t=Object(o.a)(n,2),c=t[0],u=t[1],l=e.persons,m=e.newSearch;return r.a.createElement(r.a.Fragment,null,r.a.createElement(p,{message:c}),l.filter((function(e){return e.name.toLowerCase().indexOf(m.toLowerCase())>-1})).map((function(n){return r.a.createElement(r.a.Fragment,null,r.a.createElement(h,{key:n.number,name:n.name,number:n.number}),r.a.createElement("button",{key:n.id,onClick:function(){return function(n){window.confirm("Delete ".concat(n.name,"?"))&&b(n.id).then((function(t){e.setPersons(l.slice(0,n.id).concat(l.slice(n.id+1)))})).catch((function(e){u("".concat(n.name," was already removed")),console.log("Failed to delete entry",e),setTimeout((function(){u(null)}),5e3)}))}(n)}},"delete"))})))},w=function(){var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1],u=Object(a.useState)(""),l=Object(o.a)(u,2),m=l[0],i=l[1],f=Object(a.useState)(""),d=Object(o.a)(f,2),b=d[0],p=d[1],h=Object(a.useState)(""),w=Object(o.a)(h,2),g=w[0],N=w[1];return Object(a.useEffect)((function(){s().then((function(e){c(e)}))}),[]),r.a.createElement("div",null,r.a.createElement("h2",null,"Search"),r.a.createElement("input",{value:g,onChange:function(e){N(e.target.value)}}),r.a.createElement(E,{persons:t,setPersons:c,newName:m,setNewName:i,newNumber:b,setNewNumber:p}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(v,{persons:t,setPersons:c,newSearch:g}))};t(36);u.a.render(r.a.createElement(w,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.bc91ee8b.chunk.js.map