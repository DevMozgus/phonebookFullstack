{"ast":null,"code":"var _jsxFileName = \"/home/niko/Documents/web/openstack/phonebookHeroku/frontend/src/components/Persons.js\";\nimport React, { useState } from 'react';\nimport service from '../service';\n\nconst Persons = props => {\n  const [error, setError] = useState(null);\n  const persons = props.persons;\n  const setPersons = props.setPersons;\n  const newSearch = props.newSearch;\n\n  const search = () => {\n    return persons.filter(person => person.name.toLowerCase().indexOf(newSearch.toLowerCase()) > -1);\n  };\n\n  const handleDelete = person => {\n    if (window.confirm(`Delete ${person.name}?`)) service.deleteEntry(person.id).then(response => {\n      //creates copy of array before and after element\n      props.setPersons(persons.filter(p => p.id !== person.id));\n    }).catch(err => {\n      setError(`${person.name} was already removed`);\n      console.log('Failed to delete entry', err);\n      setTimeout(() => {\n        setError(null);\n      }, 5000);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Notification, {\n    message: error,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 9\n    }\n  }), search().map(person => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Numbers, {\n    key: person.number,\n    name: person.name,\n    number: person.number,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    key: person.id,\n    onClick: () => handleDelete(person),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }\n  }, \"delete\"))));\n};\n\nconst Notification = ({\n  message\n}) => {\n  if (message === null) return null;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }\n  }, message);\n};\n\nconst Numbers = props => {\n  return /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  }, props.name), \": \", props.number);\n};\n\nexport default Persons;","map":{"version":3,"sources":["/home/niko/Documents/web/openstack/phonebookHeroku/frontend/src/components/Persons.js"],"names":["React","useState","service","Persons","props","error","setError","persons","setPersons","newSearch","search","filter","person","name","toLowerCase","indexOf","handleDelete","window","confirm","deleteEntry","id","then","response","p","catch","err","console","log","setTimeout","map","number","Notification","message","Numbers"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,OAAP,MAAoB,YAApB;;AAEA,MAAMC,OAAO,GAAIC,KAAD,IAAW;AACvB,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBL,QAAQ,CAAC,IAAD,CAAlC;AAEA,QAAMM,OAAO,GAAGH,KAAK,CAACG,OAAtB;AACA,QAAMC,UAAU,GAAGJ,KAAK,CAACI,UAAzB;AACA,QAAMC,SAAS,GAAGL,KAAK,CAACK,SAAxB;;AACA,QAAMC,MAAM,GAAG,MAAM;AACjB,WACIH,OAAO,CAACI,MAAR,CAAeC,MAAM,IAChBA,MAAM,CAACC,IAAR,CAAcC,WAAd,GAA4BC,OAA5B,CAAoCN,SAAS,CAACK,WAAV,EAApC,IAA+D,CAAC,CADpE,CADJ;AAKH,GAND;;AAQA,QAAME,YAAY,GAAIJ,MAAD,IAAY;AAC7B,QAAGK,MAAM,CAACC,OAAP,CAAgB,UAASN,MAAM,CAACC,IAAK,GAArC,CAAH,EACIX,OAAO,CAACiB,WAAR,CAAoBP,MAAM,CAACQ,EAA3B,EACKC,IADL,CACUC,QAAQ,IAAI;AACd;AACAlB,MAAAA,KAAK,CAACI,UAAN,CAAiBD,OAAO,CAACI,MAAR,CAAeY,CAAC,IAAIA,CAAC,CAACH,EAAF,KAASR,MAAM,CAACQ,EAApC,CAAjB;AACH,KAJL,EAKKI,KALL,CAKWC,GAAG,IAAI;AACVnB,MAAAA,QAAQ,CAAE,GAAEM,MAAM,CAACC,IAAK,sBAAhB,CAAR;AACAa,MAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ,EAAsCF,GAAtC;AACAG,MAAAA,UAAU,CAAC,MAAM;AACbtB,QAAAA,QAAQ,CAAC,IAAD,CAAR;AACH,OAFS,EAEP,IAFO,CAAV;AAGH,KAXL;AAaP,GAfD;;AAiBA,sBACI,uDACA,oBAAC,YAAD;AAAc,IAAA,OAAO,EAAED,KAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADA,EAECK,MAAM,GAAGmB,GAAT,CAAajB,MAAM,iBAChB,uDACA,oBAAC,OAAD;AAAS,IAAA,GAAG,EAAEA,MAAM,CAACkB,MAArB;AAA6B,IAAA,IAAI,EAAElB,MAAM,CAACC,IAA1C;AAAgD,IAAA,MAAM,EAAED,MAAM,CAACkB,MAA/D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADA,eAEA;AAAQ,IAAA,GAAG,EAAElB,MAAM,CAACQ,EAApB;AAAwB,IAAA,OAAO,EAAE,MAAMJ,YAAY,CAACJ,MAAD,CAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFA,CADH,CAFD,CADJ;AAWH,CA1CD;;AA4CA,MAAMmB,YAAY,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAiB;AAClC,MAAIA,OAAO,KAAK,IAAhB,EACI,OAAO,IAAP;AAEJ,sBACI;AAAK,IAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKA,OADL,CADJ;AAKH,CATD;;AAYA,MAAMC,OAAO,GAAI7B,KAAD,IAAW;AAEvB,sBACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAIA,KAAK,CAACS,IAAV,CADJ,QAC0BT,KAAK,CAAC0B,MADhC,CADA;AAKH,CAPD;;AASA,eAAe3B,OAAf","sourcesContent":["import React, { useState } from 'react'\nimport service from '../service'\n\nconst Persons = (props) => {\n    const [error, setError] = useState(null)\n\n    const persons = props.persons\n    const setPersons = props.setPersons\n    const newSearch = props.newSearch\n    const search = () => {\n        return (\n            persons.filter(person =>  \n                (person.name).toLowerCase().indexOf(newSearch.toLowerCase()) > -1\n            )\n        )\n    }\n\n    const handleDelete = (person) => {\n        if(window.confirm(`Delete ${person.name}?`))\n            service.deleteEntry(person.id)\n                .then(response => {\n                    //creates copy of array before and after element\n                    props.setPersons(persons.filter(p => p.id !== person.id))\n                })\n                .catch(err => {\n                    setError(`${person.name} was already removed`)\n                    console.log('Failed to delete entry', err)\n                    setTimeout(() => { \n                        setError(null)\n                    }, 5000)\n                }\n                )\n    }\n\n    return (\n        <>\n        <Notification message={error} />\n        {search().map(person => \n            <>\n            <Numbers key={person.number} name={person.name} number={person.number} />\n            <button key={person.id} onClick={() => handleDelete(person)} >delete</button>\n            </>\n            )}\n        </>\n    )\n}\n\nconst Notification = ({ message }) => {\n    if (message === null) \n        return null\n\n    return (\n        <div className=\"error\" >\n            {message}\n        </div>\n    )\n}\n\n\nconst Numbers = (props) => {\n    \n    return (\n    <p>\n        <b>{props.name}</b>: {props.number}\n    </p>\n    )\n}\n\nexport default Persons"]},"metadata":{},"sourceType":"module"}