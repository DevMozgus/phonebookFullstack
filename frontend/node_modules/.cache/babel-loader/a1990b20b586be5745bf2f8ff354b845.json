{"ast":null,"code":"import _slicedToArray from\"/home/niko/Documents/web/openstack/phonebookHeroku/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import service from'../service';var Persons=function Persons(props){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var persons=props.persons;var setPersons=props.setPersons;var newSearch=props.newSearch;var search=function search(){return persons.filter(function(person){return person.name.toLowerCase().indexOf(newSearch.toLowerCase())>-1;});};var handleDelete=function handleDelete(person){if(window.confirm(\"Delete \".concat(person.name,\"?\")))service.deleteEntry(person.id).then(function(response){//creates copy of array before and after element\nprops.setPersons(persons.filter(function(p){return p.id!==person.id;}));}).catch(function(err){setError(\"\".concat(person.name,\" was already removed\"));console.log('Failed to delete entry',err);setTimeout(function(){setError(null);},5000);});};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Notification,{message:error}),search().map(function(person){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Numbers,{key:person.number,name:person.name,number:person.number}),/*#__PURE__*/React.createElement(\"button\",{key:person.id,onClick:function onClick(){return handleDelete(person);}},\"delete\"));}));};var Notification=function Notification(_ref){var message=_ref.message;if(message===null)return null;return/*#__PURE__*/React.createElement(\"div\",{className:\"error\"},message);};var Numbers=function Numbers(props){return/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"b\",null,props.name),\": \",props.number);};export default Persons;","map":{"version":3,"sources":["/home/niko/Documents/web/openstack/phonebookHeroku/frontend/src/components/Persons.js"],"names":["React","useState","service","Persons","props","error","setError","persons","setPersons","newSearch","search","filter","person","name","toLowerCase","indexOf","handleDelete","window","confirm","deleteEntry","id","then","response","p","catch","err","console","log","setTimeout","map","number","Notification","message","Numbers"],"mappings":"kLAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAOC,CAAAA,OAAP,KAAoB,YAApB,CAEA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAACC,KAAD,CAAW,eACGH,QAAQ,CAAC,IAAD,CADX,wCAChBI,KADgB,eACTC,QADS,eAGvB,GAAMC,CAAAA,OAAO,CAAGH,KAAK,CAACG,OAAtB,CACA,GAAMC,CAAAA,UAAU,CAAGJ,KAAK,CAACI,UAAzB,CACA,GAAMC,CAAAA,SAAS,CAAGL,KAAK,CAACK,SAAxB,CACA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACjB,MACIH,CAAAA,OAAO,CAACI,MAAR,CAAe,SAAAC,MAAM,QAChBA,CAAAA,MAAM,CAACC,IAAR,CAAcC,WAAd,GAA4BC,OAA5B,CAAoCN,SAAS,CAACK,WAAV,EAApC,EAA+D,CAAC,CAD/C,EAArB,CADJ,CAKH,CAND,CAQA,GAAME,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACJ,MAAD,CAAY,CAC7B,GAAGK,MAAM,CAACC,OAAP,kBAAyBN,MAAM,CAACC,IAAhC,MAAH,CACIX,OAAO,CAACiB,WAAR,CAAoBP,MAAM,CAACQ,EAA3B,EACKC,IADL,CACU,SAAAC,QAAQ,CAAI,CACd;AACAlB,KAAK,CAACI,UAAN,CAAiBD,OAAO,CAACI,MAAR,CAAe,SAAAY,CAAC,QAAIA,CAAAA,CAAC,CAACH,EAAF,GAASR,MAAM,CAACQ,EAApB,EAAhB,CAAjB,EACH,CAJL,EAKKI,KALL,CAKW,SAAAC,GAAG,CAAI,CACVnB,QAAQ,WAAIM,MAAM,CAACC,IAAX,yBAAR,CACAa,OAAO,CAACC,GAAR,CAAY,wBAAZ,CAAsCF,GAAtC,EACAG,UAAU,CAAC,UAAM,CACbtB,QAAQ,CAAC,IAAD,CAAR,CACH,CAFS,CAEP,IAFO,CAAV,CAGH,CAXL,EAaP,CAfD,CAiBA,mBACI,qDACA,oBAAC,YAAD,EAAc,OAAO,CAAED,KAAvB,EADA,CAECK,MAAM,GAAGmB,GAAT,CAAa,SAAAjB,MAAM,qBAChB,qDACA,oBAAC,OAAD,EAAS,GAAG,CAAEA,MAAM,CAACkB,MAArB,CAA6B,IAAI,CAAElB,MAAM,CAACC,IAA1C,CAAgD,MAAM,CAAED,MAAM,CAACkB,MAA/D,EADA,cAEA,8BAAQ,GAAG,CAAElB,MAAM,CAACQ,EAApB,CAAwB,OAAO,CAAE,yBAAMJ,CAAAA,YAAY,CAACJ,MAAD,CAAlB,EAAjC,WAFA,CADgB,EAAnB,CAFD,CADJ,CAWH,CA1CD,CA4CA,GAAMmB,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,MAAiB,IAAdC,CAAAA,OAAc,MAAdA,OAAc,CAClC,GAAIA,OAAO,GAAK,IAAhB,CACI,MAAO,KAAP,CAEJ,mBACI,2BAAK,SAAS,CAAC,OAAf,EACKA,OADL,CADJ,CAKH,CATD,CAYA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAAC7B,KAAD,CAAW,CAEvB,mBACA,0CACI,6BAAIA,KAAK,CAACS,IAAV,CADJ,MAC0BT,KAAK,CAAC0B,MADhC,CADA,CAKH,CAPD,CASA,cAAe3B,CAAAA,OAAf","sourcesContent":["import React, { useState } from 'react'\nimport service from '../service'\n\nconst Persons = (props) => {\n    const [error, setError] = useState(null)\n\n    const persons = props.persons\n    const setPersons = props.setPersons\n    const newSearch = props.newSearch\n    const search = () => {\n        return (\n            persons.filter(person =>  \n                (person.name).toLowerCase().indexOf(newSearch.toLowerCase()) > -1\n            )\n        )\n    }\n\n    const handleDelete = (person) => {\n        if(window.confirm(`Delete ${person.name}?`))\n            service.deleteEntry(person.id)\n                .then(response => {\n                    //creates copy of array before and after element\n                    props.setPersons(persons.filter(p => p.id !== person.id))\n                })\n                .catch(err => {\n                    setError(`${person.name} was already removed`)\n                    console.log('Failed to delete entry', err)\n                    setTimeout(() => { \n                        setError(null)\n                    }, 5000)\n                }\n                )\n    }\n\n    return (\n        <>\n        <Notification message={error} />\n        {search().map(person => \n            <>\n            <Numbers key={person.number} name={person.name} number={person.number} />\n            <button key={person.id} onClick={() => handleDelete(person)} >delete</button>\n            </>\n            )}\n        </>\n    )\n}\n\nconst Notification = ({ message }) => {\n    if (message === null) \n        return null\n\n    return (\n        <div className=\"error\" >\n            {message}\n        </div>\n    )\n}\n\n\nconst Numbers = (props) => {\n    \n    return (\n    <p>\n        <b>{props.name}</b>: {props.number}\n    </p>\n    )\n}\n\nexport default Persons"]},"metadata":{},"sourceType":"module"}