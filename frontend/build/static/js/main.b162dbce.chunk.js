(this.webpackJsonpopenstack=this.webpackJsonpopenstack||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},36:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),u=t(13),c=t.n(u),o=t(2),l=t(3),i=t.n(l),s="/api/persons",m=function(){return i.a.get(s).then((function(e){return e.data}))},f=function(e){return i.a.post(s,e).then((function(e){return e.data}))},d=function(e,n){return i.a.put("".concat(s,"/").concat(e),n).then((function(e){return e.data}))},b=function(e){return i.a.delete("".concat(s,"/").concat(e))},E=function(e){var n=e.message;return null===n?null:r.a.createElement("div",{className:"error"},n)},p=function(e){var n=e.persons,t=e.setPersons,u=e.newName,c=e.setNewName,l=e.newNumber,i=e.setNewNumber,s=Object(a.useState)(null),m=Object(o.a)(s,2),b=m[0],p=m[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(E,{message:b}),r.a.createElement("h2",null,"Add Person"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a,r={name:u,number:l},s=(a=u,n.filter((function(e){if(e.name===a)return e}))),m=Object(o.a)(s,1)[0];(m=m||"").number===l?alert("".concat(u," already added")):m.name===u&&m.number!==l?window.confirm("".concat(u," already exists. Replace the old number?"))&&function(e,a){d(e,a).then((function(a){t(n.map((function(n){return n.id!==e?n:a})))})).catch((function(e){p(JSON.stringify(e.response.data)),setTimeout((function(){p(null)}),5e3)})),c(""),i("")}(m.id,r):function(e){f(e).then((function(e){t(n.concat(e))})).catch((function(e){p(JSON.stringify(e.response.data)),console.log(e),setTimeout((function(){p(null)}),5e3)})),c(""),i("")}(r)}},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:u,onChange:function(e){c(e.target.value)}})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:l,onChange:function(e){i(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add"))))},h=function(e){var n=e.message;return null===n?null:r.a.createElement("div",{className:"error"},n)},v=function(e){return r.a.createElement("p",null,r.a.createElement("b",null,e.name),": ",e.number)},g=function(e){var n=Object(a.useState)(null),t=Object(o.a)(n,2),u=t[0],c=t[1],l=e.persons,i=(e.setPersons,e.newSearch);return r.a.createElement(r.a.Fragment,null,l.filter((function(e){return e.name.toLowerCase().indexOf(i.toLowerCase())>-1})).map((function(n){return r.a.createElement(r.a.Fragment,null,r.a.createElement(v,{key:n.number,name:n.name,number:n.number}),r.a.createElement("button",{key:n.id,onClick:function(){return function(n){window.confirm("Delete ".concat(n.name,"?"))&&b(n.id).then((function(t){e.setPersons(l.filter((function(e){return e.id!==n.id})))})).catch((function(e){c("".concat(n.name," was already removed")),console.log("Failed to delete entry",e),setTimeout((function(){c(null)}),5e3)}))}(n)}},"delete"))})),r.a.createElement(h,{message:u}))},w=function(){var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],u=n[1],c=Object(a.useState)(""),l=Object(o.a)(c,2),i=l[0],s=l[1],f=Object(a.useState)(""),d=Object(o.a)(f,2),b=d[0],E=d[1],h=Object(a.useState)(""),v=Object(o.a)(h,2),w=v[0],N=v[1];return Object(a.useEffect)((function(){m().then((function(e){u(e)}))}),[]),r.a.createElement("div",null,r.a.createElement("h2",null,"Search"),r.a.createElement("input",{value:w,onChange:function(e){N(e.target.value)}}),r.a.createElement(p,{persons:t,setPersons:u,newName:i,setNewName:s,newNumber:b,setNewNumber:E}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(g,{persons:t,setPersons:u,newSearch:w}))};t(36);c.a.render(r.a.createElement(w,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.b162dbce.chunk.js.map